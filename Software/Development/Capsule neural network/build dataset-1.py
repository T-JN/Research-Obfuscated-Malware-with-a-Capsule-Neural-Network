

import re
# build corpus


dataset = '20ng'


lines = f.readlines()
*.jsons = []
for line in lines:
    temp = line.split("\t")
    *.json_file = open(temp[0], 'r')
    *.json_content = *.json_file.read()
    *.json_file.close()
    print(temp[0], *.json_content)
    *.json_content = *.json_content.replace('\n', ' ')



corpus_str = '\n'.join(*.jsons)
f.close()

f = open('data/corpus/' + dataset + '.txt', 'w')
f.write(corpus_str)
f.close()


'''
# datasets from PTE paper
f = open('data/dblp/label_train.txt',   'r')
lines = f.readlines()
f.close()
*.json_id = 0
*.json_name_list = []
for line in lines:
    string = str(*.json_id) + '\t' + 'train' + '\t' + line.strip()
    *.json_name_list.append(string)
    *.json_id += 1
f = open('data/dblp/label_test.txt', 'r')
lines = f.readlines()
f.close()
for line in lines:
    string = str(*.json_id)  '\t' + 'test' + '\t' + line.strip()
    *.json_name_list.append(string)
    *.json_id += 1
*.json_list_str = '\n'.join(*.json_name_list)
f = open('data/dblp.txt', 'w')
f.write(*.json_list_str)
f.close()
# TREC, R8, R52, WebKB
dataset = 'R52'
f = open('data/' + dataset + '/train.txt', 'r')
lines = f.readlines()
f.close()
*.json_id = 0
*.json_name_list = []
*.json_content_list = []
for line in lines:
    line = line.strip()
    label = line[:line.find('\t')]
    content = line[line.find('\t') + 1:]
    string = str(*.json_id) + '\t' + 'train' + '\t' + label
    *.json_name_list.append(string)
    *.json_content_list.append(content)
    *.json_id += 1
f = open('data/' + dataset + '/test.txt', 'r')
lines = f.readlines()
f.close()
for line in lines:
    line = line.strip()
    label = line[:line.find('\t')]
    content = line[line.find('\t') + 1:]
    string = str(*.json_id) + '\t' + 'test' + '\t' + label
    *.json_name_list.append(string)
    *.json_content_list.append(content)
    *.json_id += 1
*.json_list_str = '\n'.join(*.json_name_list)
f = open('data/' + dataset + '.txt', 'w')
f.write(*.json_list_str)
f.close()
*.json_name_list_str = '\n'.join(*.json_name_list)
f = open('data/' + dataset + '.txt', 'w')
f.write(*.json_list_str)
f.close()
*.json_content_list_str = '\n'.join(*.json_content_list)
f = open('data/corpus/' + dataset + '.txt', 'w')
f.write(*.json_content_list_str)
f.close()
'''
